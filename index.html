<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ò & –† ‚Äì –°–Ω–∏–º–∞–π –º–æ–º–µ–Ω—Ç–∞!</title>

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: "Arial", sans-serif;
        background: #4c2a6a;
        color: white;
        text-align: center;
    }

    h1 {
        margin-top: 40px;
        font-size: 32px;
        font-weight: 700;
    }

    .container {
        margin-top: 40px;
    }

    .btn {
        background: #b47fe1;
        padding: 18px 32px;
        border-radius: 12px;
        margin: 20px;
        font-size: 22px;
        color: white;
        border: none;
        cursor: pointer;
        width: 80%;
        max-width: 300px;
    }

    #status {
        margin-top: 30px;
        font-size: 20px;
    }

    input {
        display: none;
    }
</style>
</head>

<body>

<h1>–ò & –† ‚Äì –°–Ω–∏–º–∞–π –º–æ–º–µ–Ω—Ç–∞!</h1>

<div class="container">
    <button class="btn" onclick="document.getElementById('photoInput').click();">
        üì∏ –ù–∞–ø—Ä–∞–≤–∏ —Å–Ω–∏–º–∫–∞
    </button>

    <button class="btn" onclick="document.getElementById('videoInput').click();">
        üé• –ó–∞–ø–∏—à–∏ –≤–∏–¥–µ–æ
    </button>
</div>

<input id="photoInput" type="file" accept="image/*" capture="environment">
<input id="videoInput" type="file" accept="video/*" capture="user">

<div id="status"></div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbxTejBnyqcmwNsjdl1gKnaHdlmUjGoabzVQ_QZH77muZy8ASDjmmPYSAhVEUgEJLGGm/exec";

function uploadFile(file) {
    const status = document.getElementById("status");
    status.innerText = "‚è≥ –ö–∞—á–≤–∞–Ω–µ...";

    const reader = new FileReader();
    reader.onload = function(e) {
        fetch(scriptURL, {
            method: "POST",
            body: e.target.result,
            headers: {
                "Content-Type": file.type
            }
        })
        .then(res => res.text())
        .then(text => {
            if (text.includes("OK")) {
                status.innerText = "‚úî –£—Å–ø–µ—à–Ω–æ –∫–∞—á–µ–Ω–æ!";
            } else {
                status.innerText = "‚ùå –ì—Ä–µ—à–∫–∞: " + text;
            }
        })
        .catch(err => {
            status.innerText = "‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∫–∞—á–≤–∞–Ω–µ!";
        });
    };

    reader.readAsArrayBuffer(file);
}


document.getElementById("photoInput").addEventListener("change", e => {
    if (e.target.files.length > 0) uploadFile(e.target.files[0]);
});

document.getElementById("videoInput").addEventListener("change", e => {
    if (e.target.files.length > 0) uploadFile(e.target.files[0]);
});
</script>

</body>
</html>


